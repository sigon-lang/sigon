communication:    
    //sensor("machineSensor", "sensors.MachineSensor"). //info about the machine, such as cpu and mem usage - TODO: use this info to define epochs
    sensor("dataSensor", "sensors.DataSensor"). //data to be processed by the agent - for instance - info about malware (EMBER - 2018)
	//actuator("predictionResult", "actuators.PredictionResult"). //
    actuator("setOperation", "actuators.SetOperation"). //defines the next operation and creates a new perception of these operations
    // these actuator could change the agent's internal state
    // this one adds the operation results into the communication context


beliefs:    
    time(available). // this data can be defined with bridge rules with custom context or via custom sensor (metrics)
    resources(available). 
    performance(low). // TODO: find a different way to control improving the nn's performance
    

desires:

intentions:
    processData. //initial intention

//provides information about nn performance    
_metrics:
    //history(100,0). // it will be added by BR
    //performance(low). < 60
    //performance(medium).  >= 60 < 83
    //performance(high).  >= 83 < 100    


//defines info about accuracy, loss and predictions
_nn:


planner:
   

    plan(
        improveAccuracy,
        [action(setOperation(train))],
        [beliefs:resources(available), beliefs:time(available), _metrics:performance(low)], 
        [beliefs:canProcess] // this one probably doesnt work
    ).
    plan(
        improveAccuracy,
        [action(setOperation(fineTuning))],
        [beliefs:resources(low), beliefs:time(available), _metrics:performance(medium)], //if the agents beliefs that the resources are available and the agent has time available, the agent can execute a fine tuning
        [beliefs:canProcess]
    ).
    plan(
        improveAccuracy,
        [action(setOperation(fineTuning))],
        [beliefs:resources(low), beliefs:time(available), _metrics:performance(low)], //if the agents beliefs that the resources are available and the agent has time available, the agent can execute a fine tuning
        [beliefs:canProcess]
    ).
    plan(
        improveAccuracy,
        [action(setOperation(featureExtraction))],
        [beliefs:resources(low), beliefs:time(low), _metrics:performance(high)], //if the agents beliefs that the resources are available, the agent can execute a fine tuning
        [beliefs:canProcess]
    ).


//rules responsible to create new perceptions from different knowledge sources
//! beliefs X :- communication machineSensor(X).

! _nn setOperation(X) :- communication setOperation(X). // executes an operation with the current available data
! _nn execute(X) :- communication dataSensor(X). // executes an operation with the current available data

// we have to guarantee that this last BR executes after the nn's BR
! _metrics history(X,Y) :- _nn history(X, Y). //X = acc value and Y = loss value

